class Solution {
public:
    vector<int> replaceNonCoprimes(vector<int>& nums) {
        vector<int>ans;
        for(int i:nums){
            ans.push_back(i);
            while(ans.size()>1){
                int top=ans.back();
                int sec=ans[ans.size()-2];
                int gcd=__gcd(top,sec);
                if(gcd==1) 
                    break;
                ans.pop_back();
                ans.back()=1LL*top*sec/gcd;
            }
        }
        return ans;
    }
};
